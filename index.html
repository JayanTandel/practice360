<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMart Shopping Mall | Ultimate Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Modern UI & Professional Colors */
        :root {
            --primary: #e91e63;
            --secondary: #2e7d32;
            --dark: #1e293b;
            --light: #f8fafc;
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, sans-serif; }
        body { background: var(--light); color: var(--dark); line-height: 1.6; }

        /* Login Screen Overlay */
        #login-overlay {
            position: fixed; inset: 0; background: var(--dark); 
            display: flex; align-items: center; justify-content: center; z-index: 9999;
        }
        .login-box {
            background: white; padding: 40px; border-radius: 20px; width: 350px; text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        /* Header & Search UI */
        header { 
            background: var(--primary); color: white; padding: 1rem 5%; 
            display: none; justify-content: space-between; align-items: center; 
            position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
        }
        .logo { font-size: 1.8rem; font-weight: 800; cursor: pointer; letter-spacing: 1px; }
        
        .search-container { flex: 0.5; margin: 0 15px; }
        #searchInput { 
            width: 100%; padding: 10px 20px; border-radius: 25px; border: none; outline: none;
            font-size: 0.95rem; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-icons { display: flex; gap: 25px; align-items: center; }
        .admin-link { cursor: pointer; font-size: 0.9rem; border: 1px solid white; padding: 5px 12px; border-radius: 15px; transition: 0.3s; }
        .admin-link:hover { background: white; color: var(--primary); }
        .cart-btn { position: relative; cursor: pointer; font-size: 1.4rem; }
        #cart-count { background: #ffeb3b; color: #333; border-radius: 50%; padding: 2px 7px; font-size: 0.75rem; position: absolute; top: -10px; right: -15px; font-weight: bold; }

        /* Advanced Admin Dashboard Styles */
        #admin-panel { display: none; background: #f1f5f9; padding: 30px 5%; border-bottom: 2px solid #ddd; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border-left: 5px solid var(--primary); }
        .sales-table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 10px; overflow: hidden; }
        .sales-table th, .sales-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        .sales-table th { background: var(--dark); color: white; }

        .admin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .admin-input { padding: 10px; border: 1px solid #ddd; border-radius: 8px; width: 100%; margin-bottom: 10px;}
        .btn-save { background: var(--secondary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }

        /* Hero Banner */
        .hero { 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200');
            background-size: cover; background-position: center; color: white; text-align: center; padding: 100px 20px; 
            display: none;
        }
        .hero h1 { font-size: 3.5rem; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }

        /* Product Grid UI */
        #main-content { display: none; }
        .container { max-width: 1300px; margin: 0 auto; padding: 40px 20px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 30px; }
        
        .product-card { 
            background: var(--white); border-radius: 15px; padding: 15px; text-align: center; 
            transition: 0.4s; box-shadow: 0 6px 15px rgba(0,0,0,0.05); position: relative; overflow: hidden;
        }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0,0,0,0.12); }
        .product-card img { width: 100%; height: 220px; object-fit: cover; border-radius: 12px; margin-bottom: 15px; }
        .category-tag { font-size: 0.75rem; color: #888; text-transform: uppercase; font-weight: bold; display: block; margin-bottom: 5px; }
        .price { color: var(--primary); font-weight: 800; font-size: 1.4rem; margin-bottom: 15px; }
        .btn-add { width: 100%; background: var(--primary); color: white; border: none; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: 600; transition: 0.3s; }
        .btn-add:hover { background: #c2185b; box-shadow: 0 4px 10px rgba(233, 30, 99, 0.3); }

        /* Sidebar Cart */
        #cart-sidebar { 
            position: fixed; right: -420px; top: 0; width: 400px; height: 100%; 
            background: var(--white); box-shadow: -8px 0 25px rgba(0,0,0,0.15); 
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); z-index: 1001; padding: 30px; 
            display: flex; flex-direction: column;
        }
        #cart-sidebar.active { right: 0; }
        .cart-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f1f5f9; padding-bottom: 15px; }
        .cart-items { flex: 1; overflow-y: auto; margin: 20px 0; }
        .cart-item { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding: 10px; background: #fcfcfc; border-radius: 10px; }
        .cart-item img { width: 60px; height: 60px; border-radius: 8px; object-fit: cover; }
        .total-section { border-top: 2px solid #f1f5f9; padding-top: 20px; font-weight: 800; font-size: 1.6rem; display: flex; justify-content: space-between; }
        .checkout-btn { width: 100%; background: var(--secondary); color: white; padding: 15px; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 15px; }

        footer { display: none; background: var(--dark); color: white; text-align: center; padding: 40px; margin-top: 60px; }

        @keyframes slideDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @media (max-width: 600px) { #cart-sidebar { width: 100%; } .search-container { display: none; } }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-box">
            <h2 style="margin-bottom: 20px;">KMart Login</h2>
            <input type="text" id="loginUser" class="admin-input" placeholder="Username (admin or user)">
            <input type="password" id="loginPass" class="admin-input" placeholder="Password">
            <button class="btn-save" onclick="handleLogin()">Login to Store</button>
            <p style="margin-top: 15px; font-size: 0.8rem; color: #666;">Hint: admin/admin or user/user</p>
        </div>
    </div>

    <header id="main-header">
        <div class="logo" onclick="location.reload()">KMart üõí</div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search by name or category..." oninput="filterProducts()">
        </div>
        <div class="nav-icons">
            <div id="admin-nav-btn" class="admin-link" onclick="toggleAdmin()" style="display:none;">Admin Dashboard</div>
            <div class="cart-btn" onclick="toggleCart()">
                <i class="fas fa-shopping-bag"></i>
                <span id="cart-count">0</span>
            </div>
            <div class="admin-link" onclick="logout()" style="border-color: #ff5252; color: #ff5252;">Logout</div>
        </div>
    </header>

    <div id="admin-panel">
        <h2 style="margin-bottom: 20px;">Business Analytics & Management</h2>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h4>Total Sales</h4>
                <h2 id="total-revenue">‚Çπ0</h2>
            </div>
            <div class="stat-card" style="border-color: #2196f3;">
                <h4>Orders</h4>
                <h2 id="order-count">0</h2>
            </div>
            <div class="stat-card" style="border-color: #ff9800;">
                <h4>Customers</h4>
                <h2>1</h2>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
            <div>
                <h3>Recent Sales Records</h3>
                <table class="sales-table">
                    <thead>
                        <tr><th>ID</th><th>Customer</th><th>Amount</th><th>Status</th></tr>
                    </thead>
                    <tbody id="sales-list">
                        </tbody>
                </table>
            </div>
            <div style="background: white; padding: 20px; border-radius: 12px;">
                <h3>Add New Product</h3>
                <div class="admin-form" style="margin-top: 15px;">
                    <input type="text" id="pName" class="admin-input" placeholder="Product Name">
                    <input type="text" id="pCat" class="admin-input" placeholder="Category">
                    <input type="number" id="pPrice" class="admin-input" placeholder="Price (‚Çπ)">
                    <input type="text" id="pImg" class="admin-input" placeholder="Image URL">
                    <button class="btn-save" onclick="addNewProduct()">Save Product</button>
                </div>
            </div>
        </div>
    </div>

    <div class="hero" id="main-hero">
        <h1>Premium Shopping Experience</h1>
        <p>Curated collections with modern retail vibes. Quality guaranteed.</p>
    </div>

    <div class="container" id="main-content">
        <div class="product-grid" id="productGrid"></div>
    </div>

    <div id="cart-sidebar">
        <div class="cart-header">
            <h2>Your Bag</h2>
            <i class="fas fa-times close-cart" onclick="toggleCart()" style="cursor: pointer;"></i>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="total-section">
            <span>Total:</span>
            <span>‚Çπ<span id="totalAmount">0</span></span>
        </div>
        <button class="checkout-btn" onclick="checkout()">Confirm Order</button>
    </div>

    <footer id="main-footer">
        <p>&copy; 2026 KMart Online Store. Developed for final computer engineering project.</p>
        <p><small>Build with ‚ù§Ô∏è using JavaScript LocalStorage</small></p>
    </footer>

    <script>
        // Data Management
        let initialProducts = [
            { id: 1, name: "Smart Watch", category: "Electronics", price: 1999, img: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500" },
            { id: 2, name: "Studio Headphones", category: "Electronics", price: 2499, img: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500" },
            { id: 3, name: "Urban T-Shirt", category: "Fashion", price: 799, img: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=500" },
            { id: 4, name: "Premium Laptop Bag", category: "Accessories", price: 1299, img: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500" }
        ];

        let products = JSON.parse(localStorage.getItem('kmart_products')) || initialProducts;
        let cart = JSON.parse(localStorage.getItem('kmart_cart')) || [];
        let sales = JSON.parse(localStorage.getItem('kmart_sales')) || [];
        let currentUser = null;

        // Login Logic
        function handleLogin() {
            const user = document.getElementById('loginUser').value;
            const pass = document.getElementById('loginPass').value;

            if (user === 'admin' && pass === 'admin') {
                currentUser = { name: 'Administrator', role: 'admin' };
                document.getElementById('admin-nav-btn').style.display = 'block';
            } else if (user === 'user' && pass === 'user') {
                currentUser = { name: 'Customer User', role: 'user' };
            } else {
                return alert("Invalid username or password!");
            }

            document.getElementById('login-overlay').style.display = 'none';
            document.getElementById('main-header').style.display = 'flex';
            document.getElementById('main-hero').style.display = 'block';
            document.getElementById('main-content').style.display = 'block';
            document.getElementById('main-footer').style.display = 'block';
            
            renderProducts();
            updateCartUI();
            updateAdminStats();
        }

        function logout() {
            location.reload();
        }

        function renderProducts(data = products) {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = data.map(p => `
                <div class="product-card">
                    <span class="category-tag">${p.category}</span>
                    <img src="${p.img}" alt="${p.name}">
                    <h3>${p.name}</h3>
                    <div class="price">‚Çπ${p.price.toLocaleString('en-IN')}</div>
                    <button class="btn-add" onclick="addToCart(${p.id})">Add to Bag</button>
                    ${document.getElementById('admin-panel').style.display === 'block' ? 
                        `<button onclick="deleteProduct(${p.id})" style="margin-top:5px; background:none; border:none; color:red; cursor:pointer; font-size:0.8rem;">Remove Product</button>` : ''}
                </div>
            `).join('');
        }

        // Admin Features
        function updateAdminStats() {
            const revenue = sales.reduce((sum, sale) => sum + sale.amount, 0);
            document.getElementById('total-revenue').innerText = `‚Çπ${revenue.toLocaleString('en-IN')}`;
            document.getElementById('order-count').innerText = sales.length;
            
            const salesList = document.getElementById('sales-list');
            salesList.innerHTML = sales.map(s => `
                <tr>
                    <td>${s.id}</td>
                    <td>${s.user}</td>
                    <td>‚Çπ${s.amount}</td>
                    <td><span style="color:green">‚óè Completed</span></td>
                </tr>
            `).join('');
        }

        function addNewProduct() {
            const name = document.getElementById('pName').value;
            const cat = document.getElementById('pCat').value;
            const price = document.getElementById('pPrice').value;
            const img = document.getElementById('pImg').value;

            if(!name || !price) return alert("Fill Name and Price!");

            products.push({
                id: Date.now(),
                name,
                category: cat || "General",
                price: parseInt(price),
                img: img || "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500"
            });

            localStorage.setItem('kmart_products', JSON.stringify(products));
            renderProducts();
            alert("New Product Added to Inventory!");
        }

        function deleteProduct(id) {
            products = products.filter(p => p.id !== id);
            localStorage.setItem('kmart_products', JSON.stringify(products));
            renderProducts();
        }

        function toggleAdmin() {
            const panel = document.getElementById('admin-panel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
            updateAdminStats();
            renderProducts();
        }

        // Shopping Logic
        function filterProducts() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            const filtered = products.filter(p => 
                p.name.toLowerCase().includes(term) || p.category.toLowerCase().includes(term)
            );
            renderProducts(filtered);
        }

        function toggleCart() {
            document.getElementById('cart-sidebar').classList.toggle('active');
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            cart.push({...product, cartId: Date.now()});
            saveAndUI();
        }

        function removeItem(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            saveAndUI();
        }

        function saveAndUI() {
            localStorage.setItem('kmart_cart', JSON.stringify(cart));
            updateCartUI();
        }

        function updateCartUI() {
            const list = document.getElementById('cartItems');
            const totalDisplay = document.getElementById('totalAmount');
            document.getElementById('cart-count').innerText = cart.length;
            
            if(cart.length === 0) {
                list.innerHTML = `<p style="text-align:center; color:#999; margin-top:40px;">Your bag is empty.</p>`;
                totalDisplay.innerText = "0";
                return;
            }

            let total = 0;
            list.innerHTML = cart.map((item) => {
                total += item.price;
                return `
                    <div class="cart-item">
                        <img src="${item.img}">
                        <div class="cart-item-info">
                            <h4 style="font-size:0.9rem">${item.name}</h4>
                            <p style="font-weight:bold; color:var(--primary)">‚Çπ${item.price}</p>
                        </div>
                        <i class="fas fa-trash" style="color:#ff5252; cursor:pointer" onclick="removeItem(${item.cartId})"></i>
                    </div>
                `;
            }).join('');
            totalDisplay.innerText = total.toLocaleString('en-IN');
        }

        function checkout() {
            if(cart.length === 0) return alert("Bag is empty!");
            
            const total = cart.reduce((s, i) => s + i.price, 0);
            const newSale = {
                id: 'ORD-' + Math.floor(Math.random()*1000),
                user: currentUser.name,
                amount: total
            };

            sales.push(newSale);
            localStorage.setItem('kmart_sales', JSON.stringify(sales));
            
            alert("Order placed successfully! Total: ‚Çπ" + total.toLocaleString('en-IN'));
            cart = [];
            saveAndUI();
            toggleCart();
        }
    </script>
</body>
</html>
